<mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
    [ngClass]="marcasList.selectedOptions.selected.length > 0 ? 'active-filter-width' : 'no-filter-width'">
    <mat-expansion-panel-header [ngClass]="{'active-filter-bg': marcasList.selectedOptions.selected.length > 0}">
        <mat-panel-title [ngClass]="{'active-filter-text': marcasList.selectedOptions.selected.length > 0}">
            <span>Marcas</span>
            <span *ngIf="marcasList.selectedOptions.selected.length > 0">:</span>
        </mat-panel-title>
        <mat-panel-description [ngClass]="{'active-filter-text': marcasList.selectedOptions.selected.length > 0}"
            *ngIf="marcasList.selectedOptions.selected.length > 0">
            <span class="text-truncate">
                {{ marcasList.selectedOptions.selected[0]?.value }}
                <span *ngIf="marcasList.selectedOptions.selected.length > 1">,</span>
                {{ marcasList.selectedOptions.selected[1]?.value }}
            </span>
            <span *ngIf="marcasList.selectedOptions.selected.length > 2">
                &nbsp;+ {{marcasList.selectedOptions.selected.length - 2}}
            </span>
        </mat-panel-description>
    </mat-expansion-panel-header>
    <mat-selection-list #marcasList>
        <mat-list-option *ngFor="let marca of marcas" [value]="marca"> {{marca}} </mat-list-option>
    </mat-selection-list>
</mat-expansion-panel>
